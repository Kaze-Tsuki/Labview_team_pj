# 區塊拼圖遊戲

## 目錄

- [動機](#動機)
- [需求](#需求)
- [程式規劃流程](#程式規劃流程)
- [名詞](#名詞)
- [方塊顯示與填充](#方塊顯示與填充)
- [方塊消除偵測](#方塊消除偵測)
- [遊戲結束判定](#遊戲結束判定)
- [連機模式](#連機模式)
- [人機對打](#人機對戰)

## 動機

之前玩過1010!(填格子遊戲)  
覺得這遊戲兼具擴展與可行性  
所以決定將這遊戲的經典模式與擴展模式做出來
並在擴展模式融合AI決策（如簡易遺傳演算法或蒙地卡羅演算法）以增加挑戰性和互動性。

## 需求

- 玩家需求：直觀界面、流暢操作、清晰的遊戲規則。
- 功能需求：基本的遊戲核心邏輯（棋盤繪製、玩家互動）、AI運算模組（分析最佳步驟）、分數計算。
- 技術需求：依賴LabVIEW特有的2D圖形函數庫進行開發，並以模組化結構增強可擴展性。

## 程式規劃流程

- 系統架構：界面模組（顯示棋盤、分數）、邏輯模組（判定勝負、AI運算）、數據存取模組（保存遊戲狀態）。
- 流程圖可包括：初始化（棋盤生成）→ 玩家輸入 → AI運算 → 判定勝負 → 更新界面。
- 模組化重點：主介面main_interface.vi作為控制中心，與各子VI（如draw_block.vi）交互。

## 名詞

draw_block 接收方塊與位置，在plate上畫出  
plate 主要遊戲畫面

[1]: ./draw_block.vi "畫plate的函式，勿按"
[2]: plate "主要遊戲面板，勿按"

## 方塊顯示與填充

每次放完方快就會填充新的，目前打算是一次補三個，沒了就補  
使用picture control來展示主要遊戲畫面  
選取已擁有的方塊，點擊[plate][2]放上方塊  
希望在移動時能夠在滑鼠下面顯示一個陰影已確認放置位置  
或許能夠讓一個picture黏在滑鼠上面已達到效果，當點擊空白處時消失  
用一個二維陣列紀錄目前方塊情形
放下去時，先查看能不能放  
再更新陣列，和用[draw_block][1]來畫[plate][2]  
這樣消除比較好做

## 方塊消除偵測

放下方塊後檢測，如果有行或列滿足，就消除他(將陣列歸零)  
判定完再去顯示(畫一個白色方塊)，這樣不用顯示兩次

## 遊戲結束判定

可以先手動，但自動化偵測是必須的  
大概就是在放完方塊後，偵測剩下方塊能否放入，只要能放就可以繼續

## 連機模式

怎麼聯還要研究，但玩法已初具雛形  
只是不知道該用積分制還是堵死制

1. 積分：在遊戲結束時，積分高的獲勝
2. 堵死：以把對手堵死為勝利條件，看起來更好玩

## 人機對戰

目前以堵死為發想  
AI可以以蒙地卡羅樹搜尋，找尋可行出路，並嘗試堵死對手
也可以用剪枝搜尋，但想來實作難度頗高
