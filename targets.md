# 區塊拼圖遊戲

## 目錄

- [動機](#動機)
- [需求](#需求)
- [設計流程](#設計流程)
- [名詞](#名詞)
- [方塊顯示與填充](#方塊顯示與填充)
- [方塊消除偵測](#方塊消除偵測)
- [遊戲結束判定](#遊戲結束判定)
- [連機模式](#連機模式)
- [人機對打](#人機對戰)

## 動機

之前玩過1010!覺得這遊戲兼具擴展與可行性  
所以決定將這遊戲的經典模式與擴展模式做出來

## 需求

1. 一個放置方塊的盤面
2. 供玩家選擇方塊的ring
3. 停止鈕
4. 點擊盤面可以放下當前選擇的方塊
5. 排成列或行會消去並加分
6. 遊戲結束的判定
7. 人對人對戰
8. AI設計
9. 進入遊戲的主畫面

## 設計流程

1. 做好方塊填充(含邊界判定)
2. 重疊判定與消除判定
3. 結束判定 -> 經典模式完成
4. 聯機模式設計
5. AI設計

## 名詞

draw_block 接收方塊與位置，在plate上畫出
plate 主要遊戲畫面

[1]: ./draw_block.vi "畫plate的函式，勿按"
[2]: plate "主要遊戲面板，勿按"

## 方塊顯示與填充

每次放完方快就會填充新的，目前打算是一次補三個，沒了就補
使用picture control來展示主要遊戲畫面
選取已擁有的方塊，點擊[plate][2]放上方塊
希望在移動時能夠在滑鼠下面顯示一個陰影已確認放置位置
或許能夠讓一個picture黏在滑鼠上面已達到效果，當點擊空白處時消失
用一個二維陣列紀錄目前方塊情形
放下去時，先查看能不能放
再更新陣列，和用[draw_block][1]來畫[plate][2]
這樣消除比較好做

## 方塊消除偵測

放下方塊後檢測，如果有行或列滿足，就消除他
判定完再去顯示，這樣不用顯示兩次

## 遊戲結束判定

可以先手動，但自動化偵測是必須的  
大概就是在放完方塊後，偵測剩下方塊能否放入，只要能放就可以繼續

## 連機模式

怎麼聯還要研究，但玩法已初具雛形
只是不知道該用積分制還是堵死制

1. 積分：在遊戲結束時，積分高的獲勝
2. 堵死：以把對手堵死為勝利條件，看起來更好玩

## 人機對戰

目前以堵死為發想
AI可以以蒙地卡羅樹搜尋，找尋可行出路，並嘗試堵死對手
也可以用剪枝搜尋，但想來實作難度頗高
